<div class="example-container mat-elevation-z8">
  <div class="example-loading-shade" *ngIf="isLoadingResults || isRateLimitReached">
    <mat-spinner class="spinner" *ngIf="isLoadingResults"></mat-spinner>
    <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
      API rate limit has been reached. It will be reset in one minute.
    </div>
  </div>

  <div class="example-table-container">
    <cdk-virtual-scroll-viewport tvsItemSize="48" #scroller class="wrapper mat-elevation-z2">
      <table mat-table [dataSource]="data" class="example-table" matSort matSortActive="Country" matSortDisableClear
        matSortDirection="desc">
        <!-- Country Column -->
        <ng-container matColumnDef="Country">
          <th mat-header-cell *matHeaderCellDef  mat-sort-header>Country</th>
          <td mat-cell *matCellDef="let row">{{row.country.name}}</td>
        </ng-container>

        <!-- City Column -->
        <ng-container matColumnDef="City">
          <th mat-header-cell *matHeaderCellDef  mat-sort-header>City</th>
          <td mat-cell *matCellDef="let row">{{row.city}}</td>
        </ng-container>

        <!-- Location Column -->
        <ng-container matColumnDef="Location">
          <th mat-header-cell *matHeaderCellDef  mat-sort-header>Location</th>
          <td mat-cell *matCellDef="let row">{{row.location}}</td>
        </ng-container>

        <!-- Parameter Column -->
        <ng-container matColumnDef="Parameter">
          <th mat-header-cell *matHeaderCellDef>Parameter</th>
          <td mat-cell *matCellDef="let row">{{row.measurements[0].parameter}}</td>
        </ng-container>

        <!-- Value Column -->
        <ng-container matColumnDef="Value">
          <th mat-header-cell *matHeaderCellDef>Value</th>
          <td mat-cell *matCellDef="let row">{{row.measurements[0].value}}</td>
        </ng-container>

        <!-- Unit Column -->
        <ng-container matColumnDef="Unit">
          <th mat-header-cell *matHeaderCellDef>Unit</th>
          <td mat-cell *matCellDef="let row">{{row.measurements[0].unit}}</td>
        </ng-container>

        <!-- Updated Column -->
        <ng-container matColumnDef="Updated">
          <th mat-header-cell *matHeaderCellDef>Updated</th>
          <td mat-cell *matCellDef="let row">{{row.measurements[0].lastUpdated}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </cdk-virtual-scroll-viewport>
  </div>
</div>